<div class="container" (keydown)="onKeydown($event)" tabindex="0">
  <h1>Hangman</h1>
  <div class="game-info">
    <div class="hangman-container">
      <svg width="200" height="250" class="hangman-drawing">
        <!-- Basics-->
        <line
          x1="50"
          y1="230"
          x2="50"
          y2="50"
          stroke="black"
          stroke-width="4"
        />
        <line
          x1="47"
          y1="50"
          x2="152"
          y2="50"
          stroke="black"
          stroke-width="4"
        />
        <line
          x1="150"
          y1="50"
          x2="150"
          y2="80"
          stroke="black"
          stroke-width="4"
        />
        <!-- Legs for gallows -->
        <line
          x1="40"
          y1="230"
          x2="50"
          y2="220"
          stroke="black"
          stroke-width="4"
        />
        <line
          x1="60"
          y1="230"
          x2="50"
          y2="220"
          stroke="black"
          stroke-width="4"
        />

        <!-- Head -->
        <circle
          *ngIf="lives <= 6"
          cx="150"
          cy="100"
          r="20"
          stroke="black"
          stroke-width="2"
          fill="none"
        />

        <!-- Chest -->
        <line
          *ngIf="lives <= 5"
          x1="150"
          y1="120"
          x2="150"
          y2="180"
          stroke="black"
          stroke-width="2"
        />

        <!-- Arms -->
        <line
          *ngIf="lives <= 4"
          x1="150"
          y1="130"
          x2="120"
          y2="160"
          stroke="black"
          stroke-width="2"
        />
        <line
          *ngIf="lives <= 3"
          x1="150"
          y1="130"
          x2="180"
          y2="160"
          stroke="black"
          stroke-width="2"
        />

        <!-- Legs -->
        <line
          *ngIf="lives <= 2"
          x1="150"
          y1="180"
          x2="120"
          y2="210"
          stroke="black"
          stroke-width="2"
        />
        <line
          *ngIf="lives <= 1"
          x1="150"
          y1="180"
          x2="180"
          y2="210"
          stroke="black"
          stroke-width="2"
        />
      </svg>
    </div>

    <p>Kategoria: {{ category }}</p>
    <p>Pozostałe życia: {{ lives }}</p>
    <p>Użyte litery: {{ usedLetters }}</p>
    <p *ngIf="showWord">Wylosowane słowo: {{ word }}</p>
    <p>Wynik: {{ score }}</p>
  </div>
  <div class="word">
    <span *ngFor="let letter of hiddenWord">{{ letter }}</span>
  </div>
  <div class="letters">
    <button
      *ngFor="let letter of letters"
      (click)="guessLetter(letter)"
      [disabled]="usedLetters.includes(letter)"
    >
      {{ letter }}
    </button>
  </div>
  <div class="actions">
    <button (click)="startGame()">Nowa gra</button>
  </div>
</div>

<div class="results-overlay" *ngIf="showResults">
  <div class="results-container" *ngIf="showResults">
    <div class="results-header">
      <h2>Wyniki</h2>
      <span class="close-button" (click)="closeResultsPopup()">X</span>
    </div>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Imię gracza</th>
          <th>Wynik</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let result of results; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ result.playerName }}</td>
          <td>{{ result.score }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
